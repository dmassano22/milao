<!doctype html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>O Destino Misterioso</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <!-- √Åudio global -->
    <audio id="bgMusic" src="/assets/musica.mp3" preload="auto" loop></audio>
    <!-- Som da m√°quina de escrever (s√≥ durante a anima√ß√£o) -->
<audio id="typeSound" src="/assets/typewriter-loop.mp3" preload="auto"></audio>

    <!-- ===== GATE (C√≥digo 1511) ===== -->
    <section class="screen active" id="gate" style="--bg:url('/assets/intro-bg.jpg')">
      <div class="wrap glass gate-card">
        <h2>Introduz o c√≥digo</h2>
        <p class="hint">A verdade abre-se a quem conhece a chave‚Ä¶</p>

        <div class="gate-input">
          <input id="gateCode" type="password" inputmode="numeric" pattern="[0-9]*"
                 maxlength="4" placeholder="____" autocomplete="one-time-code"
                 aria-label="C√≥digo de 4 d√≠gitos" />
          <button class="btn" id="gateBtn">Entrar</button>
        </div>

        <!-- Teclado num√©rico -->
        <div class="numpad" aria-label="Teclado num√©rico">
          <button class="np" data-k="1">1</button>
          <button class="np" data-k="2">2</button>
          <button class="np" data-k="3">3</button>
          <button class="np" data-k="4">4</button>
          <button class="np" data-k="5">5</button>
          <button class="np" data-k="6">6</button>
          <button class="np" data-k="7">7</button>
          <button class="np" data-k="8">8</button>
          <button class="np" data-k="9">9</button>
          <button class="np np-aux" data-k="del">‚å´</button>
          <button class="np" data-k="0">0</button>
          <button class="np np-aux" data-k="ok">OK</button>
        </div>

        <p id="gateErr" class="err hidden">C√≥digo incorreto. Tenta outra vez.</p>
      </div>
    </section>

    <!-- ===== INTRO ===== -->
    <section class="screen" id="intro" style="--bg:url('/assets/intro-bg.jpg')">
      <!-- camadas subtis -->
      <div class="intro-overlay">
        <img src="/assets/simbolo-chave.png" class="intro-symbol s1" alt="">
        <img src="/assets/simbolo-aviao.png" class="intro-symbol s2" alt="">
        <img src="/assets/simbolo-sombra.png" class="intro-symbol s3" alt="">
      </div>
      <div class="intro-vignette"></div>
      <div class="intro-light"></div>
      <div class="intro-dust"></div>

      <div class="wrap glass intro-content">
        <h1>O Mist√©rio da porta 40</h1>
        <p class="intro-lead">
          Esta noite, um caminho abre-se em sil√™ncio. Tr√™s pistas, uma verdade‚Ä¶ e um destino √† tua espera.
        </p>
        <p id="typewriter" class="enigmatic"
           data-text="H√° 40 anos, numa colina isolada onde o vento contava segredos, nasceu uma herdeira.
Uns dizem que herdou apenas terras‚Ä¶ outros, que herdou mist√©rios guardados h√° gera√ß√µes.
Hoje, as portas do enigma abrem-se. Mas lembra-te: nem tudo o que v√™s √© o que parece.."></p>

        <button class="btn btn-glow" id="startBtn">Entrar no mist√©rio</button>
        <p class="hint">(som recomendado üéß)</p>
      </div>
    </section>

    <!-- ===== PISTA 1 ===== -->
    <section class="screen" id="pista1" style="--bg:url('/assets/diario.jpg')">
      <div class="wrap glass">
        <h2>O Di√°rio Assombrado</h2>
        <p class="flavour">‚ÄúNem todas as chaves abrem portas‚Ä¶ e nem todas as letras dizem o que parecem.‚Äù</p>

        <div class="diario">
          <p>
            Quando o sil√™n<span data-letter="C">C</span>io cai, o cora√ß√£o acelera<br/>
            No camin<span data-letter="H">H</span>o pequenas pistas parecem fugir.<br/>
            O destino gosta de esconder respostas √† v<span data-letter="I">I</span>sta.<br/>
            Uma palavra certa abre m<span data-letter="A">A</span>is do que imaginas.<br/>
            Olha para o a<span data-letter="V">V</span>esso do √≥bvio.<br/>
            No fim, o s<span data-letter="E">E</span>gredo revela-se.
          </p>
        </div>
<!-- ===== Quando o sil√™nCio cai, o cora√ß√£o acelera.

Uma palavra certa abre mAis do que imaginas.
Olha para o aVesso do √≥bvio.
No fim, o sEgredo revela-se.-->
        <div class="progress">Sequ√™ncia: <strong id="seq1">‚Äî</strong></div>

        <div class="nav-buttons">
          <button class="btn btn-back" disabled>Voltar</button>
          <button class="btn btn-next" id="toPista2" disabled>Seguinte</button>
        </div>
      </div>
    </section>

    <!-- ===== PISTA 2 ===== -->
    <section class="screen" id="pista2" style="--bg:url('/assets/espelho.jpg')">
      <div class="wrap glass">
        <h2>O Espelho Misterioso</h2>

        <div class="espelho-area">
          <div id="palavraEspelhoMirror" class="mirror show">PARTENZA</div>

          <div class="espelho-linha">
            <img src="/assets/esp1.jpg" alt="Espelho 1" class="espelho-img">
            <img src="/assets/esp2.jpg" alt="Espelho 2" class="espelho-img">
            <img src="/assets/esp3.jpg" alt="Espelho 3" class="espelho-img">
            <img src="/assets/esp4.jpg" alt="Espelho 4" class="espelho-img">
            <img src="/assets/esp5.jpg" alt="Espelho 5" class="espelho-img">
          </div>

          <div id="palavraEspelho" class="mirror hidden final">PARTENZA</div>
        </div>

        <p id="espelhoFrase" class="flavour">
          O reflexo engana; a sa√≠da est√° no gesto. Se tudo estiver ao contr√°rio, experimenta virar o espelho.
          √Äs vezes n√£o √© olhar, √© agir. Na d√∫vida, experimenta <span class="gatilho">virar o espelho.</span>. 
        </p>

        <p id="p2ok" class="ok hidden">O caminho est√° aberto‚Ä¶</p>

        <div class="nav-buttons">
          <button class="btn btn-back" disabled>Voltar</button>
          <button class="btn btn-next" id="toPista3" disabled>Seguinte</button>
        </div>
      </div>
    </section>

    <!-- ===== PISTA 3 ===== -->
    <section class="screen" id="pista3" style="--bg:url('/assets/relogio.jpg')">
      <div class="wrap glass">
        <h2>O Rel√≥gio Parado</h2>

        <p id="equacao">45 √ó 23 + 20 = ?</p>

        <div class="timer">
          <span id="timerLabel">Tempo</span>
          <span id="timerValue">02:00</span>
        </div>

        <div id="p3Msgs" class="mystery"></div>

        <div class="clock">
          <label>Horas
            <select id="horaSel">
              <option value="">‚Äî</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="10">10</option>
            </select>
          </label>
          <label>Minutos
            <select id="minSel">
              <option value="">‚Äî</option>
              <option value="05">05</option>
              <option value="00">00</option>
              <option value="15">15</option>
            </select>
          </label>
        </div>

        <p id="p3ok" class="ok hidden">Tlim! A gaveta secreta abriu‚Ä¶</p>

        <div class="nav-buttons">
          <button class="btn btn-back" disabled>Voltar</button>
          <button class="btn btn-next" id="toPista4" disabled>Seguinte</button>
        </div>
      </div>
    </section>

    <!-- ===== PISTA 4 (PUZZLE FINAL) ===== -->
    <section class="screen" id="pista4" style="--bg:url('/assets/porta.jpg')">
      <div class="wrap glass">
        <h2>O Mapa Rasgado</h2>
        <p class="flavour">‚ÄúRecomp√µe o caminho‚Ä¶ e ele mostrar-se-√°.‚Äù</p>

        <!-- Puzzle 3x3 -->
        <div id="puzzle" class="puzzle" data-img="/assets/milano-map.jpg" aria-label="Puzzle do mapa de Mil√£o">
          <!-- as pe√ßas s√£o geradas pelo JS -->
        </div>

        <p id="p4msg" class="hint">Troca duas pe√ßas ao tocar nelas. Quando o mapa estiver completo, a passagem abre-se.</p>
        <p id="p4ok" class="ok hidden">Perfeito. O mapa alinhou‚Ä¶ a porta est√° aberta.</p>

        <div class="nav-buttons">
          <button class="btn btn-back" disabled>Voltar</button>
          <button class="btn btn-next" id="toFinal" disabled>Seguinte</button>
        </div>
      </div>
    </section>

    <!-- ===== FINAL ===== -->
    <section class="screen" id="final" style="--bg:url('/assets/tick-rel.jpg')">
      <div class="wrap glass">
        <h2>Segredo Revelado ‚úàÔ∏è</h2>

     <!-- ‚Ä¶ mant√©m o resto do #final (t√≠tulos, contagem, bot√µes, etc.) ‚Ä¶ -->

<!-- Bilhete: agora uma foto real -->
<!-- FOTO REAL DO BOARDING PASS -->
<div class="ticket-photo">
  <img id="boardingImg" src="/assets/boarding-pass.jpg" alt="Boarding pass" />
</div>


<!-- contador continua igual -->
<div class="countdown">
  <span class="label">Faltam</span> <span id="count">‚Äî</span>
</div>


        <p class="final-msg">Mist√©rio resolvido. Faz as malas‚Ä¶ Mil√£o espera por ti!</p>
      </div>
    </section>

    <!-- Modal v√≠deo local (pista 2) -->
    <div id="videoModal" class="modal hidden">
      <div class="modal-content">
        <span id="closeVideo" class="close">&times;</span>
        <video id="localVideo" controls></video>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
